{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
  <h1 class="text-2xl font-bold mb-4">Admin Dashboard</h1>
  <p>Welcome, {{ user.name }}! You have admin access.</p>
  <ul class="list-disc ml-6 mt-4 mb-8">
    <li>Email: {{ user.email }}</li>
    <li>Role: {{ user.role }}</li>
  </ul>

  <div class="grid grid-cols-2 gap-6">
    <div>
      <h2 class="text-xl font-semibold mb-2">All Users</h2>
      <ul class="list-disc ml-4">
        <li>Total Users: {{ all_user_stats.user_count }}</li>
        <li>Total Notes: {{ all_user_stats.total_notes }}</li>
        <li>Average Notes per User: {{ all_user_stats.avg_notes }}</li>
      </ul>
    </div>

    <div>
      <h2 class="text-xl font-semibold mb-2">Non-Admin Users</h2>
      <ul class="list-disc ml-4">
        <li>Total Users: {{ non_admin_stats.user_count }}</li>
        <li>Total Notes: {{ non_admin_stats.total_notes }}</li>
        <li>Average Notes per User: {{ non_admin_stats.avg_notes }}</li>
      </ul>
    </div>
  </div>

  <h2 class="text-xl font-semibold mt-8 mb-2">Per User Stats</h2>
  <table class="min-w-full table-auto border mt-2">
    <thead>
      <tr class="bg-gray-700">
        <th class="border px-4 py-2 text-left">Email</th>
        <th class="border px-4 py-2">Role</th>
        <th class="border px-4 py-2">Note Count</th>
      </tr>
    </thead>
    <tbody>
      {% for u in all_user_stats.user_stats %}
        <tr>
          <td class="border px-4 py-2">{{ u.email }}</td>
          <td class="border px-4 py-2 text-center">{{ u.role }}</td>
          <td class="border px-4 py-2 text-center">{{ u.note_count }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
